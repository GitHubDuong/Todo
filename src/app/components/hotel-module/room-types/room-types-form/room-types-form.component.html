<div class="card card-table">
  <div class="grid m-2 md:m-4">
      <form [formGroup]="form" class="grid">
          <div class="field col-12 md:col-4 flex flex-column">
              <label htmlFor="name">
                  {{ "label.room_types_name" | translate }}
                  <span class="required">*</span>
              </label>
              <input
                  pInputText
                  id="name"
                  [(ngModel)]="form.value.name"
                  placeholder="{{ 'label.room_types_name' | translate }}"
                  [ngClass]="{
                      'input-error': form.controls.name.invalid && isSubmit
                  }"
                  formControlName="name"
              />
          </div>
          <div class="field col-12 md:col-4 flex flex-column">
              <label htmlFor="roomTypeRoomConfigureId"
                  >{{ "label.room_types_type" | translate }}
                  <span class="required">*</span>
              </label>
              <p-dropdown
                  id="roomTypeRoomConfigureId"
                  [options]="typeRooms"
                  formControlName="roomTypeRoomConfigureId"
                  [(ngModel)]="form.value.roomTypeRoomConfigureId"
                  placeholder="{{
                      'label.room_types_type_placeholder' | translate
                  }}"
                  [ngClass]="{
                      'input-error':
                          form.controls.roomTypeRoomConfigureId.invalid &&
                          isSubmit
                  }"
                  [filter]="true"
                  [optionLabel]="loadName()"
                  optionValue="id"
              ></p-dropdown>
          </div>
          <div class="field col-12 md:col-4 flex flex-column">
              <label htmlFor="quantity">
                  {{ "label.room_types_quantity" | translate }}
                  <span class="required">*</span>
              </label>
              <input
                  pInputText
                  id="quantity"
                  [(ngModel)]="form.value.quantity"
                  placeholder="{{ 'label.room_types_quantity' | translate }}"
                  [ngClass]="{
                      'input-error':
                          form.controls.quantity.invalid && isSubmit
                  }"
                  formControlName="quantity"
              />
          </div>
          <div class="field col-12 md:col-4 flex flex-column">
              <label htmlFor="lengthRoom">
                  {{ "label.room_types_size" | translate }}
                  <span class="required">*</span>
              </label>
              <div class="p-inputgroup">
                  <input
                      pInputText
                      id="lengthRoom"
                      [(ngModel)]="form.value.lengthRoom"
                      formControlName="lengthRoom"
                      placeholder="{{ 'label.room_types_size' | translate }}"
                      [ngClass]="{
                          'input-error':
                              form.controls.lengthRoom.invalid && isSubmit
                      }"
                  />
                  <span class="p-inputgroup-addon">M2</span>
              </div>
          </div>
          <div class="field col-12 md:col-4 flex flex-column">
              <label htmlFor="adultQuantity">
                  {{ "label.room_types_adultQuantity" | translate }}
                  <span class="required">*</span>
              </label>
              <input
                  pInputText
                  id="adultQuantity"
                  [(ngModel)]="form.value.adultQuantity"
                  formControlName="adultQuantity"
                  placeholder="{{
                      'label.room_types_adultQuantity' | translate
                  }}"
                  [ngClass]="{
                      'input-error':
                          form.controls.adultQuantity.invalid && isSubmit
                  }"
              />
          </div>
          <div class="field col-12 md:col-4 flex flex-column">
              <label htmlFor="childrenQuantity">
                  {{ "label.room_types_childrenQuantity" | translate }}
                  <span class="required">*</span>
              </label>
              <input
                  pInputText
                  id="childrenQuantity"
                  [(ngModel)]="form.value.childrenQuantity"
                  formControlName="childrenQuantity"
                  placeholder="{{
                      'label.room_types_childrenQuantity' | translate
                  }}"
                  [ngClass]="{
                      'input-error':
                          form.controls.childrenQuantity.invalid && isSubmit
                  }"
              />
          </div>
          <div class="field col-12 md:col-4 flex flex-column">
              <label htmlFor="isExtraBed"
                  >{{ "label.room_types_isExtraBed" | translate }}
              </label>
              <p-dropdown
                  id="isExtraBed"
                  [options]="listQuestIsBed"
                  formControlName="isExtraBed"
                  [(ngModel)]="form.value.isExtraBed"
                  placeholder="{{
                      'label.room_types_isExtraBed' | translate
                  }}"
                  [optionLabel]="'label'"
                  optionValue="value"
              ></p-dropdown>
          </div>
          <div class="field col-12 md:col-4 flex flex-column">
              <label htmlFor="bedTypeRoomConfigureId"
                  >{{ "label.room_types_typeExtraBed" | translate }}
              </label>
              <p-dropdown
                  [disabled]="!form.value.isExtraBed"
                  id="bedTypeRoomConfigureId"
                  [options]="typeExtraBeds"
                  [(ngModel)]="form.value.bedTypeRoomConfigureId"
                  [ngModelOptions]="{
                      standalone: true
                  }"
                  placeholder="{{
                      'label.room_types_typeExtraBed_placeholder' | translate
                  }}"
                  [filter]="true"
                  [optionLabel]="loadName()"
                  optionValue="id"
              ></p-dropdown>
          </div>
          <div class="col-12">
              <p-table
                  [value]="form.value.roomBeds"
                  dataKey="id"
                  [rowHover]="true"
                  styleClass="p-datatable-gridlines sidebar-custom"
                  [responsiveLayout]="isMobile ? 'stack' : 'scroll'"
                  [lazy]="true"
                  scrollDirection="both"
                  [scrollable]="!isMobile"
              >
                  <ng-template pTemplate="caption">
                      <div class="w-full grid">
                          <div class="field col-12">
                              <label>
                                  {{
                                      "label.room_types_bed_type" | translate
                                  }}
                              </label>
                          </div>
                          <ng-container
                              *ngFor="
                                  let bedType of bedTypeRoomConfigureQuantities
                              "
                          >
                              <div class="col-12 grid">
                                  <div
                                      class="field col-12 md:col-4 flex flex-column"
                                  >
                                      <p-dropdown
                                          id="bedTypeRoomConfigureId"
                                          [options]="typeExtraBeds"
                                          [(ngModel)]="
                                              bedType.bedTypeRoomConfigureId
                                          "
                                          [ngModelOptions]="{
                                              standalone: true
                                          }"
                                          placeholder="{{
                                              'label.room_types_bed_type_placeholder'
                                                  | translate
                                          }}"
                                          [filter]="true"
                                          [optionLabel]="loadName()"
                                          optionValue="id"
                                      ></p-dropdown>
                                  </div>
                                  <div
                                      class="field col-12 md:col-4 flex flex-column"
                                  >
                                      <input
                                          pInputText
                                          id="quantity"
                                          placeholder="{{
                                              'label.room_types_bed_number_placeholder'
                                                  | translate
                                          }}"
                                          [(ngModel)]="bedType.quantity"
                                          [ngModelOptions]="{
                                              standalone: true
                                          }"
                                      />
                                  </div>
                              </div>
                          </ng-container>
                          <div class="col-12">
                              <button
                                  class="md:col-4"
                                  pButton
                                  [label]="
                                      'label.room_types_bed_add' | translate
                                  "
                                  icon="pi pi-plus"
                                  (click)="onAddbedTypeRoomConfigureId()"
                              ></button>
                          </div>
                          <div
                              class="col-12 flex flex-column-reverse gap-4 md:flex-row md:justify-content-between"
                          >
                              <div class="flex gap-2 flex-column md:flex-row">
                                  <div
                                      class="mr-2 flex align-items-center"
                                  ></div>
                              </div>
                              <button
                                  pButton
                                  [label]="'button.addF7' | translate"
                                  icon="pi pi-plus"
                                  (click)="onAddRoomBed()"
                              ></button>
                          </div>
                      </div>
                  </ng-template>
                  <ng-template pTemplate="header">
                      <tr>
                          <th class="w-8">
                              <div class="flex align-items-center">
                                  {{
                                      "label.room_types_bed_type" | translate
                                  }}
                              </div>
                          </th>
                          <th class="w-3">
                              <div class="flex align-items-center">
                                  {{
                                      "label.room_types_adultQuantity"
                                          | translate
                                  }}
                              </div>
                          </th>
                          <th *ngIf="isMobile"></th>
                          <th
                              class="w-1"
                              *ngIf="!isMobile"
                              alignFrozen="right"
                              pFrozenColumn
                              [frozen]="true"
                          ></th>
                      </tr>
                  </ng-template>
                  <ng-template pTemplate="body" let-roomBed>
                      <tr>
                          <td class="w-8">
                              <span
                                  class="p-column-title"
                                  [translate]="'label.room_types_bed_type'"
                              ></span
                              >{{ loadNameRoomBed(roomBed) }}
                          </td>
                          <td class="w-3">
                              <span
                                  class="p-column-title"
                                  [translate]="
                                      'label.room_types_adultQuantity'
                                  "
                              ></span
                              >{{ loadQuantityRoomBed(roomBed) }}
                          </td>
                          <td
                              alignFrozen="right"
                              pFrozenColumn
                              [frozen]="true"
                              class="w-1 flex justify-content-space md:justify-content-center"
                          >
                              <button
                                  (click)="onDeleteRoomBed(roomBed)"
                                  pButton
                                  class="p-button-danger"
                                  icon="pi pi-trash"
                              ></button>
                          </td>
                      </tr>
                  </ng-template>
              </p-table>
          </div>
          <div class="field col">
              <label for="description">{{
                  "label.room_types_description" | translate
              }}</label>
              <p-editor
                  id="description"
                  [(ngModel)]="form.value.description"
                  [style]="{ height: '320px' }"
                  class="w-full"
                  formControlName="description"
              >
              </p-editor>
          </div>
          <div *ngIf="amenityChoiced" class="field col-12">
              <label class="col-12"
                  >{{ "label.room_types_amenityTypes" | translate }}
              </label>
              <p-table
                  [value]="amenityTypes"
                  dataKey="id"
                  styleClass="p-datatable-gridlines sidebar-custom"
                  scrollDirection="both"
                  [responsiveLayout]="isMobile ? 'stack' : 'scroll'"
                  [scrollable]="!isMobile"
              >
                  <ng-template pTemplate="body" let-amenity>
                      <tr>
                          <td class="w-4 align-items-start">
                              {{ amenity[loadName()] }}
                          </td>
                          <td class="w-8 grid gap-0 m-0 p-0">
                              <ng-container
                                  *ngFor="let amenityItem of amenity.items"
                              >
                                  <div
                                      class="flex align-items-center mb-4 gap-1 col-12 md:col-4"
                                  >
                                      <p-checkbox
                                          [value]="amenityItem"
                                          trueValue="amenityItem"
                                          [(ngModel)]="
                                              this.amenityChoiced[
                                                  amenity.code
                                              ].items
                                          "
                                          (onChange)="
                                              onChangeCheckBox($event)
                                          "
                                          [ngModelOptions]="{
                                              standalone: true
                                          }"
                                      ></p-checkbox>
                                      <label>{{
                                          amenityItem[loadName()]
                                      }}</label>
                                  </div>
                              </ng-container>
                          </td>
                      </tr>
                  </ng-template>
              </p-table>
          </div>

          <div class="col-12">
              <div class="p-fluid p-formgrid grid mt-2">
                  <div
                      class="field col-12 gap-8 flex justify-content-end mt-4 p-0"
                  >
                      <p-button
                          icon="pi pi-times"
                          (click)="onCancel.emit({})"
                          [label]="'button.backF6' | translate"
                          styleClass="p-button-outlined"
                      ></p-button>
                      <p-button
                          icon="pi pi-check"
                          (click)="onSubmit()"
                          [label]="'button.saveF8' | translate"
                      >
                      </p-button>
                  </div>
              </div>
          </div>
      </form>
  </div>
</div>
